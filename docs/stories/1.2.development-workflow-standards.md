# Story 1.2: Development Workflow Standards

## Status
Draft

## Story
**As a** developer working on the Alits project,
**I want** standardized commit message formats and automated enforcement,
**so that** the project maintains consistent git history and enables automated changelog generation

## Acceptance Criteria
1. **AC1**: Conventional Emoji Commits format is documented and enforced
2. **AC2**: Husky git hooks are configured for commit message validation
3. **AC3**: Commitlint is integrated with conventional commits config
4. **AC4**: Pre-commit hooks run linting and tests
5. **AC5**: Commit message format is documented in coding conventions
6. **AC6**: Simple emoji mapping system is implemented for AI agents

## Tasks / Subtasks
- [ ] Task 1: Install and configure commitlint with conventional commits
  - [ ] Install `@commitlint/cli` and `@commitlint/config-conventional`
  - [ ] Create `.commitlintrc.js` with project-specific scopes
  - [ ] Add `commit-msg` hook to Husky for validation
- [ ] Task 2: Set up Husky for git hooks
  - [ ] Install `husky`
  - [ ] Configure `prepare` script for Husky installation
  - [ ] Add `pre-commit` hook for linting, formatting, and tests
- [ ] Task 3: Implement simple emoji mapping system for AI agents
  - [ ] Create emoji mapping utility function
  - [ ] Map conventional commit types to appropriate emojis
  - [ ] Document emoji mapping for AI agent usage
  - [ ] Add emoji mapping to AGENTS.md guidelines
- [ ] Task 4: Document commit message standards
  - [ ] Update `docs/brief-coding-conventions.md` with Conventional Emoji Commits and task reference guidelines
  - [ ] Reference `docs/My___Dev___Tool___Pref___SCM.md` for detailed SCM preferences
  - [ ] Update `AGENTS.md` to emphasize git standards for all agents
- [ ] Task 5: Test enforcement workflow
  - [ ] Attempt invalid commit messages and verify rejection
  - [ ] Attempt valid commit messages and verify acceptance
  - [ ] Test emoji mapping system with AI agents
  - [ ] Verify pre-commit hooks run successfully

## Dev Notes

### Previous Story Insights
This story builds on the foundational setup from Story 1.1.

### Data Models
N/A

### API Specifications
N/A

### Component Specifications
**Commitlint Configuration**:
- `.commitlintrc.js` will define rules and scopes.
- Scopes will include: `core`, `tracks`, `clips`, `devices`, `racks`, `drums`, `docs`, `build`, `ci`, `test`.

**Husky Configuration**:
- `.husky/commit-msg` will run `commitlint --edit $1`.
- `.husky/pre-commit` will run `pnpm lint && pnpm test`.

**Emoji Mapping System**:
- Simple utility function to map conventional commit types to emojis
- Programmatic approach suitable for AI agents
- Consistent emoji selection based on commit type
- Integration with existing git workflow

### File Locations
- `docs/stories/1.2.development-workflow-standards.md` (this file)
- `docs/brief-coding-conventions.md`
- `docs/My___Dev___Tool___Pref___SCM.md`
- `AGENTS.md`
- `.commitlintrc.js`
- `package.json` (for husky scripts)
- `.husky/` directory
- `src/utils/emoji-mapping.ts` (emoji mapping utility)

## Testing
Manual testing will involve:
1. Attempting to commit with various valid and invalid messages to ensure the hooks are functioning correctly
2. Testing emoji mapping system with AI agents
3. Verifying that pre-commit hooks run linting and tests
4. Confirming that commit message validation works as expected

## Dev Agent Record
### Agent Model Used
N/A

### Debug Log References
N/A

### Completion Notes List
N/A

### File List
N/A

### Change Log
N/A

## Status
Draft
